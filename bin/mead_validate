#!/usr/bin/env ruby
$LOAD_PATH.unshift File.join(File.dirname(__FILE__), '..', 'lib')
require 'pp'
require 'mead'

# NCSU specific format validation
module Mead
  class Identifier
    def self.format_regexp
      container_codes = Mead::CONTAINER_MAPPING.keys.join('|') 
      /^(ua\d{3}|mc\d{5})(_\d{3})?-\d{3}-(#{container_codes})\d{4}-\d{3}([A-Z])?-\d{3}(_\d{4})?$/
    end 
  end
end

automead = Mead::Identifier.new(ARGV[0], ARGV[1])
if automead.valid?
  puts 'Valid.'
else
  puts 'Invalid.'
  pp automead.errors
end
